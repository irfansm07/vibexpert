<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>VibeXpert - Connect With Your College</title>
  <link rel="stylesheet" href="vibemap.css" />

  <!-- CropperJS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

  <!-- Socket.io -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body class="dark-theme">

<!-- LIVE ACTIVITY NOTIFICATION -->
<div id="liveActivityNotif" class="live-activity-notif">
  <div class="notif-dot"></div>
  <span id="notifText">Loading...</span>
</div>

<!-- LOGIN PAGE -->
<div id="loginPage" class="auth-page">
  <div class="auth-container">
    <div class="auth-box">
      <h1>VibeXpert</h1>
      <p>Connect With The Verse</p>

      <div id="message"></div>

      <!-- LOGIN FORM -->
      <form id="loginForm" onsubmit="login(event)">
        <h2>Login</h2>
        <input type="text" id="loginEmail" placeholder="Email or Reg Number" required>
        <input type="password" id="loginPassword" placeholder="Password" required>
        <button type="submit">Login</button>
        <p>Don't have account? <a href="#" onclick="goSignup(event)">Sign Up</a></p>
        <p style="text-align:center; margin-top:10px;">
          <a href="#" onclick="goForgotPassword(event)" style="font-size:13px;">Forgot Password?</a>
        </p>
      </form>

      <!-- FORGOT PASSWORD FORM -->
      <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event)" style="display:none;">
        <h2>Reset Password</h2>
        <input type="email" id="resetEmail" placeholder="Enter your email" required>
        <button type="submit">Send Reset Link</button>
        <p><a href="#" onclick="goLogin(event)">Back to Login</a></p>
      </form>

      <!-- SIGNUP FORM -->
      <form id="signupForm" onsubmit="signup(event)" style="display:none;">
        <h2>Create Account</h2>
        <input type="text" id="signupName" placeholder="Full Name" required>
        <input type="email" id="signupEmail" placeholder="Email" required>
        <input type="text" id="signupReg" placeholder="Registration Number" required>

        <!-- Gender -->
        <label>Gender</label>
        <div class="radio-group">
          <label><input type="radio" name="gender" value="Male" required> 👨 Male</label>
          <label><input type="radio" name="gender" value="Female"> 👩 Female</label>
          <label><input type="radio" name="gender" value="Other"> 🌈 Other</label>
        </div>

        <!-- Type -->
        <label>Type</label>
        <div class="radio-group">
          <label><input type="radio" name="type" value="Extrovert" required> 😊 Extrovert</label>
          <label><input type="radio" name="type" value="Introvert"> 🎧 Introvert</label>
        </div>

        <!-- Interests -->
        <label>Interested In</label>
        <div class="checkbox-grid">
          <label><input type="checkbox" name="interests" value="Games"> 🎮 Games</label>
          <label><input type="checkbox" name="interests" value="Sports"> ⚽ Sports</label>
          <label><input type="checkbox" name="interests" value="Music"> 🎵 Music</label>
          <label><input type="checkbox" name="interests" value="Gossips"> 💬 Gossips</label>
          <label><input type="checkbox" name="interests" value="Photos"> 📸 Photos</label>
          <label><input type="checkbox" name="interests" value="Food"> 🍕 Food</label>
          <label><input type="checkbox" name="interests" value="Love"> ❤️ Love</label>
        </div>

        <input type="text" id="signupHobbies" placeholder="E.g. painting, football, coding">
        <input type="password" id="signupPass" placeholder="Password" required>
        <input type="password" id="signupConfirm" placeholder="Confirm Password" required>

        <button type="submit">Create Account</button>
        <p>Already have an account? <a href="#" onclick="goLogin(event)">Login</a></p>
      </form>
    </div>
  </div>
</div>

<!-- MAIN PAGE -->
<div id="mainPage" class="main-page" style="display:none;">

  <!-- HEADER -->
  <header class="header">
    <div class="logo" onclick="goHome()">VibeXpert</div>

    <div class="live-counter">
      <span class="live-badge">🔴 Live</span>
      <span id="liveUsersCount">0 Active</span>
    </div>

    <nav class="nav">
      <a href="#" class="nav-link active" onclick="showPage('home', event)">Home</a>
      <a href="#" class="nav-link" onclick="showPage('communities', event)">Communities</a>
      <a href="#" class="nav-link" onclick="showPage('posts', event)">Posts</a>
      <a href="#" class="nav-link" onclick="showPage('badges', event)">Badges</a>
    </nav>

    <div class="header-right">
      <div class="search-container">
        <input type="text" class="search-box" id="searchBox" placeholder="Search users...">
        <div class="search-results" id="searchResults"></div>
      </div>

      <span class="user-name" id="userName">Hi, User</span>

      <button class="options-btn" onclick="toggleOptionsMenu()">
        <span></span><span></span><span></span>
      </button>

      <div class="options-menu" id="optionsMenu">
        <div class="menu-item" onclick="showProfilePage()">👤 Profile</div>
        <div class="menu-item" onclick="showComplaintModal()">📢 Complaint</div>
        <div class="menu-item" onclick="showFeedbackModal()">💬 Feedback</div>
        <div class="menu-item" onclick="toggleTheme()">🎨 Theme</div>
        <div class="menu-item" onclick="showContactModal()">📞 Contact Us</div>
        <hr>
        <div class="menu-item logout" onclick="logout()">🚪 Logout</div>
      </div>
    </div>
  </header>

  <!-- CONTENT -->
  <main class="content">

    <!-- HOME -->
    <section id="home" class="page active">
      <div class="hero">
        <h1>Welcome to VibeXpert</h1>
        <p>Connect with students across 500+ universities!</p>

        <div class="hero-stats">
          <div><span id="heroOnline">0</span><br>Online Now</div>
          <div><span id="heroPostsToday">0</span><br>Posts Today</div>
          <div><span id="heroChats">0</span><br>Active Chats</div>
        </div>
      </div>

      <div class="trending-section">
        <h2 class="title">🔥 Trending Now</h2>
        <div id="trendingContainer" class="trending-grid"></div>
      </div>

      <h2 class="title">500+ Active Universities</h2>
      <div class="cards">
        <div class="card" onclick="selectUniversity('nit')">
          <div class="icon">🏛️</div>
          <h3>NIT Colleges</h3>
          <p>National Institutes of Technology</p>
          <button>Explore</button>
        </div>
        <div class="card" onclick="selectUniversity('iit')">
          <div class="icon">🏰</div>
          <h3>IIT Colleges</h3>
          <p>Indian Institutes of Technology</p>
          <button>Explore</button>
        </div>
        <div class="card" onclick="selectUniversity('vit')">
          <div class="icon">🎓</div>
          <h3>VIT Colleges</h3>
          <p>VIT Campuses</p>
          <button>Explore</button>
        </div>
        <div class="card" onclick="selectUniversity('other')">
          <div class="icon">🌟</div>
          <h3>Other Universities</h3>
          <p>Central & State Universities</p>
          <button>Explore</button>
        </div>
      </div>
    </section>

    <!-- POSTS -->
    <section id="posts" class="page" style="display:none;">
      <h2 class="title">My Posts</h2>

      <div class="enhanced-post-creator">
        <textarea id="postText" class="post-textarea" placeholder="What's on your mind? Share your vibe... ✨" maxlength="1000"></textarea>

        <div id="selectedAssets" class="selected-assets"></div>
        <div id="photoPreviewContainer" class="media-preview"></div>

        <div class="post-destination-display">
          📍 Posting to: <span id="currentDestination">My Profile</span>
          <button type="button" class="change-destination-btn" onclick="showPostDestinationModal()">Change</button>
        </div>

        <div class="post-actions-row">
          <div class="post-features">
            <button class="feature-btn" onclick="openPhotoGallery()">🖼️ Media</button>
            <button class="feature-btn" onclick="openCamera()">📷 Camera</button>
            <button class="feature-btn" onclick="openMusicSelector()">🎵 Music</button>
            <button class="feature-btn" onclick="openStickerSelector()">🎨 Stickers</button>
          </div>
          <button class="post-button" onclick="createPost()">🚀 Post</button>
        </div>
      </div>

      <div id="postsFeed" class="posts-feed"></div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 VibeXpert. All rights reserved. | <span id="footerUsers">0</span> Users Online</p>
  </footer>
</div>

<!-- MODALS -->
<div id="postDestinationModal" class="selector-modal">
  <div class="selector-content">
    <div class="selector-header">
      <h2>Where to Post?</h2>
      <button onclick="closeModal('postDestinationModal')">&times;</button>
    </div>
    <div class="selector-body">
      <div class="destination-option" onclick="selectPostDestination('profile')">👤 My Profile</div>
      <div class="destination-option" onclick="selectPostDestination('community')">🌐 Community Feed</div>
    </div>
  </div>
</div>

<!-- Music Selector -->
<div id="musicSelectorModal" class="selector-modal">
  <div class="selector-content">
    <div class="selector-header">
      <h2>Add Music to Your Post</h2>
      <button onclick="closeModal('musicSelectorModal')">&times;</button>
    </div>
    <div class="selector-body" id="musicSelector"></div>
  </div>
</div>

<!-- Sticker Selector -->
<div id="stickerSelectorModal" class="selector-modal">
  <div class="selector-content">
    <div class="selector-header">
      <h2>Add Stickers</h2>
      <button onclick="closeModal('stickerSelectorModal')">&times;</button>
    </div>
    <div class="selector-body" id="stickerSelector"></div>
  </div>
</div>

<!-- Crop Editor -->
<div id="cropEditorModal" class="selector-modal">
  <div class="selector-content">
    <div class="selector-header">
      <h2>✂️ Crop Photo</h2>
      <button onclick="closeModal('cropEditorModal')">&times;</button>
    </div>
    <div class="selector-body crop-container">
      <div class="crop-preview">
        <img id="cropImage" src="" alt="Crop Preview">
      </div>
      <div class="aspect-ratio-buttons">
        <button class="aspect-ratio-btn active" data-ratio="free">Free</button>
        <button class="aspect-ratio-btn" data-ratio="1">1:1</button>
        <button class="aspect-ratio-btn" data-ratio="16/9">16:9</button>
        <button class="aspect-ratio-btn" data-ratio="4/3">4:3</button>
        <button class="aspect-ratio-btn" data-ratio="3/2">3:2</button>
      </div>
      <div class="crop-actions">
        <button class="btn-secondary" onclick="rotateImage()">🔄 Rotate</button>
        <button class="btn-secondary" onclick="resetCrop()">↩️ Reset</button>
        <button class="btn-primary" onclick="applyCrop()">💾 Apply Crop</button>
      </div>
    </div>
  </div>
</div>

<!-- Contact Modal -->
<div id="contactModal" class="selector-modal">
  <div class="selector-content">
    <div class="selector-header">
      <h2>Contact Us</h2>
      <button onclick="closeModal('contactModal')">&times;</button>
    </div>
    <div class="selector-body">
      <p>📧 Email: support@vibexpert.com</p>
      <p>📱 Phone: +91-9347702626</p>
      <p>💬 Live Chat: 24/7</p>
    </div>
  </div>
</div>

<script src="vibemap.js"></script>
</body>
</html>
