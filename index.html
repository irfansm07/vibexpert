<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>VibeXpert - Connect With Your College</title>
  <link rel="stylesheet" href="vibemap.css" />
</head>
<body class="dark-theme">

<!-- Socket.io CDN -->
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

<!-- LIVE ACTIVITY NOTIFICATION -->
<div id="liveActivityNotif" class="live-activity-notif">
  <div class="notif-dot"></div>
  <span id="notifText">Loading...</span>
</div>

<!-- LOGIN PAGE -->
<div id="loginPage" class="auth-page">
  <div class="auth-container">
    <div class="auth-box">
      <h1>VibeXpert</h1>
      <p>Connect With The Verse</p>
      
      <div id="message"></div>

      <!-- LOGIN FORM -->
      <form id="loginForm" onsubmit="login(event)">
        <h2>Login</h2>
        <input type="text" id="loginEmail" placeholder="Email or Reg Number" required>
        <input type="password" id="loginPassword" placeholder="Password" required>
        <button type="submit">Login</button>
        <p>Don't have account? <a href="#" onclick="goSignup(event)">Sign Up</a></p>
        <p style="text-align:center; margin-top:10px;"><a href="#" onclick="goForgotPassword(event)" style="font-size:13px;">Forgot Password?</a></p>
      </form>

      <!-- FORGOT PASSWORD FORM -->
      <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event)" style="display:none;">
        <h2>Reset Password</h2>
        <input type="email" id="resetEmail" placeholder="Enter your email" required>
        <button type="submit">Send Reset Link</button>
        <p><a href="#" onclick="goLogin(event)">Back to Login</a></p>
      </form>

      <!-- SIGNUP FORM -->
      <form id="signupForm" onsubmit="signup(event)" style="display:none;">
        <h2>Create Account</h2>
        
        <input type="text" id="signupName" placeholder="Full Name" required>
        <input type="email" id="signupEmail" placeholder="Email" required>
        <input type="text" id="signupReg" placeholder="Registration Number" required>
        
        <!-- GENDER SELECTION -->
        <label style="display:block; margin:15px 0 10px 0; color:#a0a0a0; font-size:14px;">Gender</label>
        <div style="display:flex; gap:15px; margin-bottom:15px;">
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="radio" name="gender" value="Male" required style="cursor:pointer;">
            ğŸ‘¨ Male
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="radio" name="gender" value="Female" style="cursor:pointer;">
            ğŸ‘© Female
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="radio" name="gender" value="Other" style="cursor:pointer;">
            ğŸŒˆ Other
          </label>
        </div>

        <!-- TYPE SELECTION -->
        <label style="display:block; margin:15px 0 10px 0; color:#a0a0a0; font-size:14px;">Type</label>
        <div style="display:flex; gap:15px; margin-bottom:15px;">
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="radio" name="type" value="Extrovert" required style="cursor:pointer;">
            ğŸ˜Š Extrovert
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="radio" name="type" value="Introvert" style="cursor:pointer;">
            ğŸ§ Introvert
          </label>
        </div>

        <!-- INTERESTS SELECTION -->
        <label style="display:block; margin:15px 0 10px 0; color:#a0a0a0; font-size:14px;">Interested In</label>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:15px;">
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Games" style="cursor:pointer;">
            ğŸ® Games
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Sports" style="cursor:pointer;">
            âš½ Sports
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Music" style="cursor:pointer;">
            ğŸµ Music
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Gossips" style="cursor:pointer;">
            ğŸ’¬ Gossips
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Photos" style="cursor:pointer;">
            ğŸ“¸ Photos
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Food" style="cursor:pointer;">
            ğŸ• Food
          </label>
          <label style="display:flex; align-items:center; gap:8px; cursor:pointer; color:#d0d0d0;">
            <input type="checkbox" name="interests" value="Love" style="cursor:pointer;">
            â¤ï¸ Love
          </label>
        </div>

        <!-- HOBBIES -->
        <input type="text" id="signupHobbies" placeholder="E.g. painting, football, coding" style="margin-bottom:14px; width:100%; padding:14px 16px; border:2px solid rgba(79, 116, 163, 0.3); background:rgba(20, 30, 50, 0.8); color:white; border-radius:10px; font-size:15px; transition:all 0.3s ease;">

        <!-- PASSWORD -->
        <input type="password" id="signupPass" placeholder="Password" required>
        <input type="password" id="signupConfirm" placeholder="Confirm Password" required>
        
        <button type="submit">Create Account</button>
        <p>Already have account? <a href="#" onclick="goLogin(event)">Login</a></p>
      </form>
    </div>
  </div>
</div>

<!-- MAIN PAGE -->
<div id="mainPage" class="main-page" style="display:none;">
  
  <!-- HEADER -->
  <header class="header">
    <div class="logo" onclick="goHome()">VibeXpert</div>
    
    <!-- LIVE USERS COUNTER -->
    <div class="live-counter">
      <span class="live-badge">ğŸ”´ Live</span>
      <span id="liveUsersCount">0 Active</span>
    </div>
    
    <nav class="nav">
      <a href="#" class="nav-link active" onclick="showPage('home', event)">Home</a>
      <a href="#" class="nav-link" onclick="showPage('communities', event)">Communities</a>
      <a href="#" class="nav-link" onclick="showPage('posts', event)">Posts</a>
      <a href="#" class="nav-link" onclick="showPage('badges', event)">Badges</a>
    </nav>

    <div class="header-right">
      <input type="text" class="search-box" placeholder="Search users...">
      <span class="user-name" id="userName">Hi, User</span>
      
      <button class="options-btn" onclick="toggleOptionsMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <div class="options-menu" id="optionsMenu" style="display:none;">
        <div class="menu-item" onclick="showProfilePage()">ğŸ‘¤ Profile</div>
        <div class="menu-item" onclick="showComplaintModal()">ğŸ“¢ Complaint</div>
        <div class="menu-item" onclick="showFeedbackModal()">ğŸ’¬ Feedback</div>
        <div class="menu-item" onclick="toggleTheme()">ğŸ¨ Theme</div>
        <div class="menu-item" onclick="showContactModal()">ğŸ“ Contact Us</div>
        <hr>
        <div class="menu-item logout" onclick="logout()">ğŸšª Logout</div>
      </div>

      <button class="hamburger-btn" onclick="toggleHamburgerMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <div class="hamburger-menu" id="hamburgerMenu" style="display:none;">
        <div class="menu-item" onclick="showPage('home', event)">ğŸ  Home</div>
        <div class="menu-item" onclick="showPage('communities', event)">ğŸ‘¥ Communities</div>
        <div class="menu-item" onclick="showPage('posts', event)">ğŸ“ Posts</div>
        <div class="menu-item" onclick="showPage('badges', event)">ğŸ† Badges</div>
        <hr>
        <div class="menu-item" onclick="showProfilePage()">ğŸ‘¤ Profile</div>
        <div class="menu-item" onclick="showComplaintModal()">ğŸ“¢ Complaint</div>
        <div class="menu-item" onclick="showFeedbackModal()">ğŸ’¬ Feedback</div>
        <div class="menu-item" onclick="toggleTheme()">ğŸ¨ Theme</div>
        <div class="menu-item" onclick="showContactModal()">ğŸ“ Contact Us</div>
        <hr>
        <div class="menu-item logout" onclick="logout()">ğŸšª Logout</div>
      </div>
    </div>
  </header>

  <!-- CONTENT -->
  <main class="content">

    <!-- HOME -->
    <section id="home" class="page active">
      <div class="hero">
        <h1>Welcome to VibeXpert</h1>
        <p>Connect with students across 500+ universities!</p>
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="stat-num" id="heroOnline">0</span>
            <span class="stat-label">Online Now</span>
          </div>
          <div class="hero-stat">
            <span class="stat-num" id="heroPostsToday">0</span>
            <span class="stat-label">Posts Today</span>
          </div>
          <div class="hero-stat">
            <span class="stat-num" id="heroChats">0</span>
            <span class="stat-label">Active Chats</span>
          </div>
        </div>
      </div>

      <!-- TRENDING SECTION -->
      <div class="trending-section">
        <h2 class="title">ğŸ”¥ Trending Now</h2>
        <div id="trendingContainer" class="trending-grid"></div>
      </div>

      <h2 class="title">500+ Active Universities</h2>
      <div class="cards">
        <div class="card" onclick="selectUniversity('nit')">
          <div class="icon">ğŸ›ï¸</div>
          <h3>NIT Colleges</h3>
          <p>National Institutes of Technology</p>
          <button>Explore</button>
        </div>
        <div class="card" onclick="selectUniversity('iit')">
          <div class="icon">ğŸ°</div>
          <h3>IIT Colleges</h3>
          <p>Indian Institutes of Technology</p>
          <button>Explore</button>
        </div>
        <div class="card" onclick="selectUniversity('vit')">
          <div class="icon">ğŸ“</div>
          <h3>VIT Colleges</h3>
          <p>VIT Bhopal & Other Campuses</p>
          <button>Explore</button>
        </div>
        <div class="card" onclick="selectUniversity('other')">
          <div class="icon">ğŸŒŸ</div>
          <h3>Other Universities</h3>
          <p>Central & State Universities</p>
          <button>Explore</button>
        </div>
      </div>
    </section>

    <!-- COLLEGE LIST -->
    <section id="collegeList" class="page" style="display:none;">
      <div class="college-header">
        <h2 id="collegeTitle">Colleges</h2>
        <input type="text" id="searchCollege" placeholder="Search colleges..." onkeyup="searchColleges()">
      </div>
      <div id="collegeContainer" class="colleges"></div>
      <div id="pagination" class="pagination"></div>
      <button class="back-btn" onclick="backToUniversities()">â† Back</button>
    </section>

    <!-- COMMUNITIES -->
    <section id="communities" class="page" style="display:none;">
      <h2 class="title">Join Communities</h2>
      <div id="communitiesContainer"></div>
      <div id="chatSection" style="display:none; margin-top:40px;">
        <div class="chat-header">
          <h3>Community Chat</h3>
          <div class="chat-online-count"><span class="online-dot"></span><span id="chatOnlineCount">0</span> Online</div>
        </div>
        <div class="chat-box">
          <div class="chat-messages" id="chatMessages"></div>
          <div class="chat-input-box">
            <input type="text" id="chatInput" placeholder="Type a message..." onkeypress="handleChatKeypress(event)">
            <button class="send-btn" onclick="sendChatMessage()">Send</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ENHANCED POSTS SECTION -->
    <section id="posts" class="page" style="display:none;">
      <h2 class="title">My Posts</h2>
      
      <!-- Enhanced Post Creator -->
      <div class="post-creator">
        <textarea 
          id="postText" 
          placeholder="What's on your mind? Share with your community..." 
          maxlength="1000"
        ></textarea>
        
        <div id="charCounter" class="char-counter">0/1000</div>
        
        <!-- Photo Preview Container -->
        <div id="photoPreviewContainer" class="photo-preview-container"></div>
        
        <!-- Action Buttons -->
        <div class="post-actions">
          <button type="button" onclick="openGallery()" class="action-btn">
            ğŸ–¼ï¸ Gallery
          </button>
          
          <button type="button" onclick="openCamera()" class="action-btn">
            ğŸ“· Camera
          </button>
          
          <button type="button" onclick="openMusicLibrary()" class="action-btn">
            ğŸµ Music
          </button>
          
          <button type="button" onclick="showPostDestinationModal()" class="action-btn destination-btn">
            ğŸ“ <span id="destinationText">Profile</span>
          </button>
          
          <button type="button" onclick="createPost()" class="post-submit-btn">
            ğŸš€ Post
          </button>
        </div>
      </div>
      
      <!-- Posts Feed -->
      <div id="postsFeed" class="posts-feed"></div>
    </section>

    <!-- BADGES PAGE -->
    <section id="badges" class="page" style="display:none;">
      <!-- Content loaded dynamically by JS -->
    </section>

  </main>

  <footer>
    <p>&copy; 2025 VibeXpert. All rights reserved. | <span id="footerUsers">0</span> Users Online</p>
  </footer>
</div>

<!-- MODALS -->
<div id="verifyModal" class="modal" style="display:none;"></div>

<div id="contactModal" class="modal" style="display:none;">
  <div class="modal-box">
    <span class="close" onclick="closeModal('contactModal')">&times;</span>
    <h2>Contact Us</h2>
    <p>ğŸ“§ Email: support@vibexpert.com</p>
    <p>ğŸ“± Phone: +91-9347702627</p>
    <p>ğŸ’¬ Live Chat: 24/7</p>
  </div>
</div>

<div id="complaintModal" class="modal" style="display:none;">
  <div class="modal-box">
    <span class="close" onclick="closeModal('complaintModal')">&times;</span>
    <h2>Submit Complaint</h2>
    <textarea id="complaintText" placeholder="Describe your complaint..."></textarea>
    <button onclick="submitComplaint()">Submit Complaint</button>
  </div>
</div>

<!-- IMAGE EDITOR MODAL -->
<div id="imageEditorModal" class="modal" style="display:none;">
  <div class="modal-box editor-modal">
    <span class="close" onclick="closeImageEditor()">&times;</span>
    <h2>Edit Image</h2>
    
    <div class="editor-container">
      <div class="editor-canvas-wrapper">
        <canvas id="editorCanvas"></canvas>
      </div>
      
      <div class="editor-tabs">
        <button class="editor-tab active" onclick="switchEditorTab('filters')">ğŸ¨ Filters</button>
        <button class="editor-tab" onclick="switchEditorTab('crop')">âœ‚ï¸ Crop</button>
        <button class="editor-tab" onclick="switchEditorTab('stickers')">ğŸ˜Š Stickers</button>
        <button class="editor-tab" onclick="switchEditorTab('text')">ğŸ“ Text</button>
      </div>
      
      <div id="filtersPanel" class="editor-panel active">
        <div class="filter-controls">
          <div class="filter-control">
            <label>Brightness</label>
            <input type="range" id="brightness" min="0" max="200" value="100" oninput="applyFilters()">
          </div>
          <div class="filter-control">
            <label>Contrast</label>
            <input type="range" id="contrast" min="0" max="200" value="100" oninput="applyFilters()">
          </div>
          <div class="filter-control">
            <label>Saturation</label>
            <input type="range" id="saturation" min="0" max="200" value="100" oninput="applyFilters()">
          </div>
          <div class="filter-control">
            <label>Blur</label>
            <input type="range" id="blur" min="0" max="10" value="0" oninput="applyFilters()">
          </div>
          <div class="filter-control">
            <label>Grayscale</label>
            <input type="range" id="grayscale" min="0" max="100" value="0" oninput="applyFilters()">
          </div>
          <div class="filter-control">
            <label>Sepia</label>
            <input type="range" id="sepia" min="0" max="100" value="0" oninput="applyFilters()">
          </div>
        </div>
        <button onclick="resetFilters()" class="reset-btn">Reset Filters</button>
      </div>
      
      <div id="cropPanel" class="editor-panel">
        <div class="crop-controls">
          <button onclick="cropSquare()">Square 1:1</button>
          <button onclick="cropPortrait()">Portrait 4:5</button>
          <button onclick="cropLandscape()">Landscape 16:9</button>
          <button onclick="rotateImage()">â†» Rotate 90Â°</button>
          <button onclick="flipHorizontal()">â†”ï¸ Flip H</button>
          <button onclick="flipVertical()">â†•ï¸ Flip V</button>
        </div>
      </div>
      
      <div id="stickersPanel" class="editor-panel">
        <div class="stickers-grid" id="stickersGrid"></div>
      </div>
      
      <div id="textPanel" class="editor-panel">
        <div class="text-controls">
          <input type="text" id="textInput" placeholder="Enter text..." maxlength="50">
          <input type="color" id="textColor" value="#ffffff">
          <select id="fontSize">
            <option value="20">Small</option>
            <option value="30" selected>Medium</option>
            <option value="40">Large</option>
            <option value="50">XLarge</option>
          </select>
          <button onclick="addTextToImage()">Add Text</button>
        </div>
      </div>
      
      <div class="editor-actions">
        <button onclick="saveEditedImage()" class="save-btn">ğŸ’¾ Save</button>
        <button onclick="closeImageEditor()" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- MUSIC LIBRARY MODAL -->
<div id="musicModal" class="modal" style="display:none;">
  <div class="modal-box music-modal">
    <span class="close" onclick="closeMusicModal()">&times;</span>
    <h2>Add Background Music</h2>
    
    <div class="music-tabs">
      <button class="music-tab active" onclick="switchMusicTab('library')">ğŸ“š Library</button>
      <button class="music-tab" onclick="switchMusicTab('upload')">ğŸ“¤ Upload</button>
    </div>
    
    <div id="musicLibraryPanel" class="music-panel active">
      <div class="music-search">
        <input type="text" id="musicSearch" placeholder="Search music..." oninput="filterMusic()">
      </div>
      <div id="musicList" class="music-list"></div>
    </div>
    
    <div id="musicUploadPanel" class="music-panel">
      <div class="upload-area" onclick="document.getElementById('musicFileInput').click()">
        <p>ğŸµ Click to upload your music</p>
        <small>MP3, WAV (max 10MB)</small>
      </div>
      <input type="file" id="musicFileInput" accept="audio/*" style="display:none" onchange="handleMusicUpload(event)">
    </div>
  </div>
</div>

<!-- POST DESTINATION MODAL -->
<div id="destinationModal" class="modal" style="display:none;">
  <div class="modal-box destination-modal">
    <span class="close" onclick="closeDestinationModal()">&times;</span>
    <h2>Where to Post?</h2>
    
    <div class="destination-options">
      <div class="destination-option" onclick="selectDestination('profile')">
        <div class="destination-icon">ğŸ‘¤</div>
        <h3>My Profile</h3>
        <p>Only visible on your profile</p>
      </div>
      
      <div class="destination-option" onclick="selectDestination('community')">
        <div class="destination-icon">ğŸŒ</div>
        <h3>Community Feed</h3>
        <p>Visible to all college members</p>
      </div>
    </div>
  </div>
</div>

<script src="vibemap.js"></script>
</body>
</html>
